# 加算器のチュートリアル

ここでは加算器を例として，HDL 記述とシミュレーションのチュートリアルをおこないます．

[実験の準備](../setup.md) をあらかじめ済ましておいてください．

## 準備

端末を起動し，tutorial/adder へ移動してください．

### このチュートリアルでつかうファイル

* Adder.v
    * 加算器の定義
* AdderSim.v
    * 加算器をシミュレーションするための定義
* Types.v
    * 各ファイルで使うマクロの定義

## コンパイル

まず，上記のファイルをシミュレータでシミュレーションできる形式に変換（これをコンパイルと言います）します．

具体的には，コンソール上で以下のように make と打って Enter をおします．
```
$ make
```

この時，ファイルの内容にエラーがあった場合は，該当するファイル名や行数が表示されるので，それを元に直します．

うまくいった場合，以下のように表示されます．
```
-- Compiling module Adder
-- Compiling module AdderSimulator

Top level modules:
        AdderSimulator
```

## シミュレーション

シミュレーションは，コンソール上で行う方法と，GUI 上で行う方法の2つがあります．以下のそれぞれを試してみてください．

### コマンドライン
コンソールで以下のコマンドを実行．
```
$ make sim
```

### シミュレーション結果
うまくシミュレーションできた場合， 以下のように時系列ごとの加算の過程が表示されます．
```
#          0 a(    1) + b(    8) = c(    9)
#         40 a(    9) + b(    6) = c(   15)
```

### GUI
コンソールで以下のコマンドを実行．
```
$ make sim-gui
```

うまくいった場合，ウィンドウが開き，加算器に接続されている信号の変化が波形として表示されるはずです．
## 課題
>減算器のHDL記述（Sub.v）とそのシミュレーション記述（SubSim.v）を作成し，回路が意図した動作をしているかを確認せよ．作成した Sub.v と SubSim.v，および結果は，進捗レポートにまとめ提出すること．動作確認では，最低3回は入力を変化させること．

* ひな形として，tutorial/subtractor が用意してあるので，これを編集して作るとよいです．
* また，[ModelSim](../modelsim.md) を読んで，ModelSim 内で減算の様子を表示してみてください．
* 減算器を作る際は，[Verilogの記法について](../verilog.md)をよく読んで作ってください．
